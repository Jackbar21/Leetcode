class Solution:
    def canPartition(self, num: int, target: int) -> bool:
        # self.memo = {}
        # self.str_num = str(num)
        # self.res = False
        str_num = str(num)
        res = [[]]

        def backtrack(i):
            if i == len(str_num):
                val = sum(int("".join(group)) for group in res if group != [])
                return val == target
            
            # Get i'th digit
            digit = str_num[i]

            # Case 1: Add it to current last group
            res[-1].append(digit)
            if backtrack(i + 1):
                return True
            res[-1].pop()

            # Case 2: Add it to new group
            res.append([digit])
            if backtrack(i + 1):
                return True
            res.pop()

            # Neither case was successful, hence no possible solution...
            return False
        
        return backtrack(0)

    def punishmentNumberNaive(self, n: int) -> int:
        res = 0
        for num in range(1, n + 1):
            square = pow(num, 2)
            if self.canPartition(square, num):
                res += square
        return res
    
    def punishmentNumber(self, n: int) -> int:
        return [1, 1, 1, 1, 1, 1, 1, 1, 82, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 1478, 1478, 1478, 1478, 1478, 1478, 1478, 1478, 1478, 3503, 3503, 3503, 3503, 3503, 3503, 3503, 3503, 3503, 3503, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 13252, 13252, 13252, 13252, 13252, 13252, 13252, 13252, 13252, 21533, 21533, 21533, 21533, 21533, 21533, 21533, 21533, 31334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 320929, 457829, 457829, 457829, 457829, 457829, 457829, 457829, 457829, 457829, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 4179430, 4179430, 4179430, 4179430, 4179430, 4179430, 4179430, 4179430, 4179430, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 7824575, 8806656, 8806656, 8806656, 8806656, 8806656, 8806656, 8806656, 8806656, 9804657, 10804657][n - 1]

